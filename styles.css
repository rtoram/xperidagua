canvas.addEventListener('mouseup', () => {
    if (isDragging && mode === 'crop') {
        isDragging = false;

        // Calcula a área de corte
        const cropX = Math.min(startX, endX);
        const cropY = Math.min(startY, endY);
        const cropWidth = Math.abs(endX - startX);
        const cropHeight = Math.abs(endY - startY);

        // Salva a área de corte
        const croppedImage = ctx.getImageData(cropX, cropY, cropWidth, cropHeight);
        
        // Redesenha a imagem original
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, 0, 0);

        // Aplica a área de corte na imagem original
        ctx.putImageData(croppedImage, cropX, cropY);

        // Atualiza a imagem original para o recorte
        img.src = canvas.toDataURL();
    }
    isDragging = false;
});
